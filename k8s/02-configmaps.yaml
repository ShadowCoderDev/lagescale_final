apiVersion: v1
kind: ConfigMap
metadata:
  name: database-config
  namespace: ecommerce
  labels:
    app: ecommerce
    component: database
data:
  POSTGRES_USER: "postgres"
  POSTGRES_DB: "ecommerce"
  MONGODB_DATABASE: "products_db"
  RABBITMQ_USER: "guest"
  RABBITMQ_VHOST: "/"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: user-service-config
  namespace: ecommerce
  labels:
    app: ecommerce
    service: user-service
data:
  SERVICE_HOST: "0.0.0.0"
  SERVICE_PORT: "8000"
  DATABASE_URL: "postgresql://postgres:postgres123@user-db:5432/users_db"
  CORS_ORIGINS: "http://localhost:3000,http://frontend:80"
  ACCESS_TOKEN_EXPIRE_MINUTES: "4320"
  REFRESH_TOKEN_EXPIRE_DAYS: "14"
  LOG_LEVEL: "INFO"
  DEBUG: "false"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: product-service-config
  namespace: ecommerce
  labels:
    app: ecommerce
    service: product-service
data:
  SERVICE_HOST: "0.0.0.0"
  SERVICE_PORT: "8002"
  MONGODB_HOST: "mongodb"
  MONGODB_PORT: "27017"
  MONGODB_DATABASE: "products_db"
  MONGODB_USERNAME: "admin"
  CORS_ORIGINS: "http://localhost:3000,http://frontend:80"
  LOG_LEVEL: "INFO"
  DEBUG: "false"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: order-service-config
  namespace: ecommerce
  labels:
    app: ecommerce
    service: order-service
data:
  SERVICE_HOST: "0.0.0.0"
  SERVICE_PORT: "8003"
  DATABASE_URL: "postgresql://postgres:postgres123@order-db:5432/orders_db"
  USER_SERVICE_URL: "http://user-service:8000"
  PRODUCT_SERVICE_URL: "http://product-service:8002"
  PAYMENT_SERVICE_URL: "http://payment-service:8004"
  RABBITMQ_HOST: "rmq-broker"
  RABBITMQ_PORT: "5672"
  RABBITMQ_USER: "guest"
  RABBITMQ_QUEUE: "notifications"
  HTTP_TIMEOUT: "10"
  HTTP_MAX_RETRIES: "3"
  HTTP_RETRY_DELAY: "1"
  CORS_ORIGINS: "http://localhost:3000,http://frontend:80"
  LOG_LEVEL: "INFO"
  DEBUG: "false"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: payment-service-config
  namespace: ecommerce
  labels:
    app: ecommerce
    service: payment-service
data:
  SERVICE_HOST: "0.0.0.0"
  SERVICE_PORT: "8004"
  DATABASE_URL: "postgresql://postgres:postgres123@payment-db:5432/payments_db"
  # Simulated failure rate for fault tolerance testing
  PAYMENT_FAILURE_RATE: "0.1"
  CORS_ORIGINS: "http://localhost:3000,http://frontend:80"
  LOG_LEVEL: "INFO"
  DEBUG: "false"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: notification-service-config
  namespace: ecommerce
  labels:
    app: ecommerce
    service: notification-service
data:
  SERVICE_HOST: "0.0.0.0"
  SERVICE_PORT: "8005"
  DATABASE_URL: "postgresql://postgres:postgres123@notification-db:5432/notifications_db"
  RABBITMQ_HOST: "rmq-broker"
  RABBITMQ_PORT: "5672"
  RABBITMQ_USER: "guest"
  RABBITMQ_QUEUE: "notifications"
  SMTP_HOST: "mailhog"
  SMTP_PORT: "1025"
  SMTP_USE_TLS: "false"
  CORS_ORIGINS: "http://localhost:3000,http://frontend:80"
  LOG_LEVEL: "INFO"
  DEBUG: "false"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: frontend-config
  namespace: ecommerce
  labels:
    app: ecommerce
    service: frontend
data:
  VITE_API_BASE_URL: "http://api.ecommerce.local"
  VITE_USER_SERVICE_URL: "http://api.ecommerce.local/api/users"
  VITE_PRODUCT_SERVICE_URL: "http://api.ecommerce.local/api/products"
  VITE_ORDER_SERVICE_URL: "http://api.ecommerce.local/api/orders"
